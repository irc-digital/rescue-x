{% set quiz_id = quiz_id ?: 'quiz' %}
<div id={{ quiz_id }} class="rplc-quiz">
  {% for quiz_question in quiz_questions %}
    <div id="{{ quiz_id }}-question-{{ loop.index }}" class="rplc-quiz__question" data-rpl-quiz-question-state="{{ loop.first ? 'unanswered' : 'hidden' }}">
      <div class="rplc-quiz__question-outer-wrapper">
        <div class="rplc-quiz__question-inner-wrapper">
          {% if loop.first %}
            <div class="rplc-quiz__cta-wrapper" data-rpl-rotate='10'>
              {% include '@atoms/30-button/button.twig' with {
                button_url: quiz_call_to_action_button_url,
                button_text: quiz_call_to_action_button_text,
                button_modifiers: ['display-block', 'type-two'],
              } only %}
            </div>
          {% endif %}
          <h3 class="rplc-quiz__question-text">{{ quiz_question.question }}</h3>
            <div class="rplc-quiz__slider-wrapper">
              {% include '@molecules/95-range/range.twig' with {
                range_left_key: 'incorrect',
                range_left_label: quiz_question.incorrect.label,
                range_center_key: 'unanswered',
                range_right_key: 'correct',
                range_right_label: quiz_question.correct.label,
              } only %}
            </div>
            <div class="rplc-quiz__help-message">{{ "Drag icon to make your choice" | trans }}</div>
            <div class="rplc-quiz__answer-state-wrapper">
              <div class="rplc-quiz__unanswered-wrapper">
                {% include '@molecules/65-quiz-cards/05-unanswered/quiz-card-unanswered.twig' with {
                  quiz_card_unanswered_title: quiz_question.unanswered.title,
                  quiz_card_unanswered_description: quiz_question.unanswered.description,
                  quiz_card_unanswered_responsive_image_source_set: quiz_question.unanswered.responsive_image_source_set,
                  quiz_card_unanswered_responsive_image_fallback: quiz_question.unanswered.responsive_image_fallback,
                  quiz_card_unanswered_responsive_image_alt: quiz_question.unanswered.responsive_image_alt,
                } only %}
              </div>
              <div class="rplc-quiz__incorrect-wrapper">
                {% include '@molecules/65-quiz-cards/10-incorrect/quiz-card-incorrect.twig' with {
                  quiz_card_incorrect_title: quiz_question.incorrect.title,
                  quiz_card_incorrect_description: quiz_question.incorrect.description,
                  quiz_card_incorrect_link_url: quiz_question.incorrect.urL,
                  quiz_card_incorrect_link_title: quiz_question.incorrect.title,
                } only %}
              </div>
              <div class="rplc-quiz__correct-wrapper">
                {% include '@molecules/65-quiz-cards/15-correct/quiz-card-correct.twig' with {
                  quiz_card_correct_title: quiz_question.correct.title,
                  quiz_card_correct_description: quiz_question.correct.description,
                } only %}
                {% if not loop.last %}
                  {% set url = '#' ~ quiz_id ~ '-question-' ~ (loop.index + 1) %}
                  {% set link_title = ("Next question" | trans) %}
                {% else %}
                  {% set url = quiz_call_to_action_button_url %}
                  {% set link_title = quiz_call_to_action_button_text %}
                {% endif %}
                <a class="rplc-quiz__next-question-link" href="{{ url }}" data-rpl-slow-scroll>
                  <div class="rplc-quiz__next-question-text">{{ link_title }}</div>
                  <div class="rplc-quiz__next-question-icon-wrapper">
                    {% include '@atoms/05-icon/icon.twig' with {
                      icon_name: 'caret-down',
                    } only %}
                  </div>
                </a>
              </div>
            </div>
        </div>
      </div>
    </div>
  {% endfor %}
</div>


