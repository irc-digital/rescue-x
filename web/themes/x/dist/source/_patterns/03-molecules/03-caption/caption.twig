{#
/**
 * Caption
 *
 * Available variables:
 *   caption_text - Text of the caption
 *   caption_credit - Person or organization that gets credit for the image
 *   caption_modifiers - Modifiers
 *     style-low-key - Small, gray text with transparent background
 *     style-white-box - White background
 */
#}
{% spaceless %}

  {% set caption_modifiers = caption_modifiers ?: [] %}

  {% set has_style = false %}
  {% for caption_modifier in caption_modifiers %}
    {% if caption_modifier starts with 'style-' %}
      {% set has_style = true %}
    {% endif %}
  {% endfor %}

  {% if not has_style %}
    {% set caption_modifiers = caption_modifiers | merge(['style-default']) %}
  {% endif %}

{% endspaceless %}
<div class="rplm-caption{% for caption_modifier in caption_modifiers %} rplm-caption--{{ caption_modifier }}{% endfor %}">
  <div class="rplm-caption__text-wrapper">
    <p class="rplm-caption__text">{{ caption_text }}</p>
{% if caption_credit %}
    <h6 class="rplm-caption__credit">{{ "Photo:" | trans }} {{ caption_credit }}</h6>
{% endif %}
  </div>
</div>